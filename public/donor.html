<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <meta name="description" content="Donor-Profil - FreilaufendeOnlineFuzzies Folding@Home Team #240890">
  <meta name="theme-color" content="#2c2c2c">
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' https://cdn.jsdelivr.net/npm/chart.js@4/; style-src 'self' 'unsafe-inline'; img-src 'self' data:; connect-src 'self'; font-src 'self'; object-src 'none'; base-uri 'self'; form-action 'self'; frame-ancestors 'none'; upgrade-insecure-requests;">
  <title>Donor Profile | FOF Stats</title>
  <link rel="manifest" href="/manifest.json">
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4/dist/chart.umd.min.js" defer integrity="sha384-jb8JQMbMoBUzgWatfe6COACi2ljcDdZQ2OxczGA3bGNeWe+6DChMTBJemed7ZnvJ" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/css/donor.css">
</head>
<body>
  <a href="#main-content" class="skip-link">Zum Inhalt springen</a>

  <!-- Navigation -->
  <nav class="navbar">
    <div class="container">
      <a href="/" class="nav-brand">
        <span class="brand-icon">&#x1F9EC;</span>
        FOF Stats
      </a>
      <button class="nav-toggle" id="nav-toggle" aria-label="Navigation umschalten" aria-expanded="false">&#9776;</button>
      <ul class="nav-links" id="nav-links">
        <li><a href="/">Dashboard</a></li>
        <li><a href="/donors">Alle Mitglieder</a></li>
        <li><a href="#" class="active" id="nav-donor-name">Donor</a></li>
      </ul>
    </div>
  </nav>

  <main id="main-content">
  <!-- Hero with donor name -->
  <header class="hero donor-hero">
    <div class="hero-content">
      <div class="terminal-prefix">C:\FOF\DONOR></div>
      <h1 class="hero-title" id="donor-name">Lade...</h1>
      <p class="hero-subtitle" id="donor-subtitle">Lade Profil...</p>
    </div>
  </header>

  <!-- KPI Cards -->
  <section class="section" id="donor-kpis">
    <div class="container">
      <div class="kpi-grid donor-kpi-grid">
        <div class="card kpi-card">
          <span class="kpi-icon">&#x1F4CA;</span>
          <div class="kpi-value" id="donor-score">---</div>
          <div class="kpi-label">Score</div>
        </div>
        <div class="card kpi-card">
          <span class="kpi-icon">&#x2699;&#xFE0F;</span>
          <div class="kpi-value" id="donor-wus">---</div>
          <div class="kpi-label">Work Units</div>
        </div>
        <div class="card kpi-card">
          <span class="kpi-icon">&#127942;</span>
          <div class="kpi-value" id="donor-rank">---</div>
          <div class="kpi-label">Globaler Rank</div>
        </div>
        <div class="card kpi-card">
          <span class="kpi-icon">&#x1F465;</span>
          <div class="kpi-value" id="donor-team-rank">---</div>
          <div class="kpi-label">Team Rank</div>
        </div>
        <div class="card kpi-card">
          <span class="kpi-icon">&#x26A1;</span>
          <div class="kpi-value" id="donor-efficiency">---</div>
          <div class="kpi-label">Effizienz (Pts/WU)</div>
        </div>
        <div class="card kpi-card">
          <span class="kpi-icon">&#x1F4C8;</span>
          <div class="kpi-value" id="donor-contribution">---</div>
          <div class="kpi-label">Team-Anteil</div>
        </div>
      </div>
    </div>
  </section>

  <!-- 7-Day Gains -->
  <section class="section" id="donor-gains">
    <div class="container">
      <div class="section-header">
        <h2 class="section-title">
          <span class="section-icon">&#x1F4C8;</span>
          DELTA.EXE /DAYS:7
        </h2>
        <p class="section-subtitle">Zuwachs in den letzten 7 Tagen</p>
      </div>
      <div class="gains-grid">
        <div class="card gain-card">
          <div class="gain-label">Score Zuwachs (7d)</div>
          <div class="gain-value" id="donor-score-gain">---</div>
        </div>
        <div class="card gain-card">
          <div class="gain-label">WU Zuwachs (7d)</div>
          <div class="gain-value" id="donor-wus-gain">---</div>
        </div>
        <div class="card gain-card">
          <div class="gain-label">Score vs. Durchschnitt</div>
          <div class="gain-value" id="donor-vs-avg">---</div>
        </div>
      </div>
    </div>
  </section>

  <!-- Score History Chart -->
  <section class="section" id="donor-history">
    <div class="container">
      <div class="section-header">
        <h2 class="section-title">
          <span class="section-icon">&#x1F4C8;</span>
          HISTORY.LOG
        </h2>
        <p class="section-subtitle">Score-Verlauf</p>
      </div>
      <div class="card chart-card">
        <div class="history-controls" style="margin-bottom:8px; display:flex; gap:8px; flex-wrap:wrap; padding:8px 12px 0;">
          <span style="color:var(--text-secondary); font-size:0.85rem; align-self:center;">Zeitraum:</span>
          <button class="period-btn active" data-period="hourly">Stuendlich</button>
          <button class="period-btn" data-period="daily">Taeglich</button>
          <button class="period-btn" data-period="weekly">Woechentlich</button>
          <button class="period-btn" data-period="monthly">Monatlich</button>
        </div>
        <div class="chart-container" id="donor-chart-container">
          <canvas id="donor-history-chart"></canvas>
        </div>
      </div>
      <!-- History Table -->
      <div class="card donor-history-table-card" id="donor-history-table-container">
        <div class="donor-history-table-header">
          <span class="section-icon">&#x1F4CB;</span> PUNKTE-HISTORIE
        </div>
        <div class="donor-history-table-wrap">
          <table class="donor-history-table" id="donor-history-table">
            <thead>
              <tr>
                <th>Zeitraum</th>
                <th>Score</th>
                <th>Zuwachs</th>
                <th>Work Units</th>
                <th>WU Zuwachs</th>
              </tr>
            </thead>
            <tbody id="donor-history-table-body">
              <tr><td colspan="5" class="history-table-empty">Lade Daten...</td></tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </section>

  <!-- Activity Heatmap -->
  <section class="section" id="donor-heatmap">
    <div class="container">
      <div class="section-header">
        <h2 class="section-title">
          <span class="section-icon">&#x1F5D3;</span>
          HEATMAP.EXE
        </h2>
        <p class="section-subtitle">Aktivitaetsmuster (Wochentag x Uhrzeit)</p>
      </div>
      <div class="card">
        <div id="donor-heatmap-container" class="heatmap-container" style="padding:16px;">
          <div class="skeleton" style="width:100%;height:160px;"></div>
        </div>
      </div>
    </div>
  </section>

  <!-- Achievements -->
  <section class="section" id="donor-achievements">
    <div class="container">
      <div class="section-header">
        <h2 class="section-title">
          <span class="section-icon">&#x1F3C6;</span>
          TROPHY.EXE /USER
        </h2>
        <p class="section-subtitle">Persoenliche Achievements und Meilensteine</p>
      </div>

      <!-- Achievement Summary Bar -->
      <div class="ach-summary card" id="ach-summary">
        <div class="ach-summary-stats">
          <span class="ach-summary-count" id="ach-summary-count">---/--- Achievements</span>
          <span class="ach-summary-sep">|</span>
          <span class="ach-summary-points" id="ach-summary-points">--- Punkte</span>
          <span class="ach-summary-sep">|</span>
          <span class="ach-summary-pct" id="ach-summary-pct">--% Abgeschlossen</span>
        </div>
        <div class="ach-progress-bar">
          <div class="ach-progress-fill" id="ach-progress-fill" style="width:0%"></div>
        </div>
      </div>

      <!-- Search + Filter Tabs -->
      <div class="ach-controls">
        <div class="ach-search">
          <span class="search-icon">&#x1F50D;</span>
          <input type="text" id="ach-search-input" placeholder="Achievement suchen..." aria-label="Achievements durchsuchen" />
        </div>
        <div class="ach-tabs" id="ach-tabs">
          <button class="ach-tab active" data-category="all">Alle</button>
          <button class="ach-tab" data-category="score">Score</button>
          <button class="ach-tab" data-category="wus">WUs</button>
          <button class="ach-tab" data-category="streak">Streak</button>
          <button class="ach-tab" data-category="rank">Rank</button>
          <button class="ach-tab" data-category="speed">Speed</button>
          <button class="ach-tab" data-category="team">Team</button>
          <button class="ach-tab" data-category="time">Time</button>
          <button class="ach-tab" data-category="special">Special</button>
        </div>
      </div>

      <!-- Achievement Grid -->
      <div class="ach-grid" id="ach-grid">
        <div class="forecast-loading">Lade Achievements...</div>
      </div>
    </div>
  </section>

  <!-- Achievement Detail Modal -->
  <div class="ach-modal-overlay" id="ach-modal-overlay">
    <div class="ach-modal card">
      <div class="ach-modal-header">
        <span class="ach-modal-title" id="ach-modal-title">Achievement</span>
        <button class="ach-modal-close" id="ach-modal-close">X</button>
      </div>
      <div class="ach-modal-body" id="ach-modal-body"></div>
    </div>
  </div>

  <!-- Donor Predictions -->
  <section class="section" id="donor-predictions-section">
    <div class="container">
      <div class="section-header">
        <h2 class="section-title">
          <span class="section-icon">&#x1F52E;</span>
          PREDICT.EXE
        </h2>
        <p class="section-subtitle">Persoenliche Prognosen, Meilensteine und Trend-Analyse</p>
      </div>

      <div id="donor-predictions">
        <div class="forecast-loading">Lade persoenliche Prognosen...</div>
      </div>
    </div>
  </section>

  <!-- Team Comparison -->
  <section class="section" id="donor-comparison">
    <div class="container">
      <div class="section-header">
        <h2 class="section-title">
          <span class="section-icon">&#x1F4CA;</span>
          COMPARE.EXE
        </h2>
        <p class="section-subtitle">Vergleich mit Team-Durchschnitt</p>
      </div>
      <div class="card" style="padding:16px;">
        <div id="donor-comparison-bars">
          <div class="forecast-loading">Lade Vergleichsdaten...</div>
        </div>
      </div>
    </div>
  </section>

  <!-- Donor Diary / Wochen-Recap -->
  <section class="section" id="donor-diary-section">
    <div class="container">
      <div class="section-header">
        <h2 class="section-title">
          <span class="section-icon">&#x1F4D3;</span>
          DIARY.EXE
        </h2>
        <p class="section-subtitle">Persoenliches Wochen-Recap mit Statistiken und Abzeichen</p>
      </div>

      <div id="donor-diary">
        <div class="forecast-loading">Lade Wochen-Recap...</div>
      </div>
    </div>
  </section>

  </main>

  <!-- Footer -->
  <footer class="footer">
    <div class="container">
      <div class="footer-content">
        <ul class="footer-links">
          <li><a href="/">Dashboard</a></li>
          <li><a href="/donors">Alle Mitglieder</a></li>
          <li><a id="fah-profile-link" href="#" target="_blank" rel="noopener noreferrer">F@H Profil</a></li>
        </ul>
        <p class="footer-credit">
          FreilaufendeOnlineFuzzies | Team #240890<br>
          Mitglieder-Profil
        </p>
      </div>
    </div>
  </footer>

  <script src="/js/utils.js" defer></script>
  <script src="/js/feature-predictions.js" defer></script>
  <script src="/js/feature-diary.js" defer></script>
  <script src="/js/donor-page.js" defer></script>
  <script src="/js/nav-toggle.js" defer></script>
</body>
</html>